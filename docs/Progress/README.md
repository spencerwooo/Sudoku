---
sidebarDepth: 3
---

# å¼€å‘å†ç¨‹

## I. é¡¹ç›®åœ°å€

:::tip é¡¹ç›®åœ°å€ä¸ç›¸å…³é“¾æ¥

-   GitHub é¡¹ç›®é¦–é¡µï¼š<https://github.com/spencerwooo/Sudoku>
-   é¡¹ç›®åšå®¢ã€README ä¸»é¡µï¼š[https://spencerwoo.com/Sudoku](/)
-   **é¡¹ç›®å¼€å‘å†ç¨‹ä¸»é¡µ**ï¼š[https://spencerwoo.com/Sudoku/Progress](/Progress/)

**è¿™é‡Œæ˜¯é¡¹ç›®è¦æ±‚çš„ã€Œè§£å†³é¡¹ç›®çš„å¿ƒè·¯å†ç¨‹å’Œæ”¶è·ã€ç­‰å¼€å‘å†ç¨‹å†…å®¹é¡µé¢ã€‚**
:::

## II. PSP

|                PSP 2.1                |   Personal Software Progress Stages    | é¢„ä¼°è€—æ—¶ï¼ˆåˆ†é’Ÿï¼‰ | å®é™…è€—æ—¶ï¼ˆåˆ†é’Ÿï¼‰ |
| :-----------------------------------: | :------------------------------------: | :--------------: | :--------------: |
|               Planning                |                  è®¡åˆ’                  |        60        |        30        |
|               Estimate                |        ä¼°è®¡è¿™ä¸ªä»»åŠ¡éœ€è¦å¤šå°‘æ—¶é—´        |       2500       |       3000       |
|              Development              |                  å¼€å‘                  |       1500       |       1800       |
|               Analysis                |       éœ€æ±‚åˆ†æï¼ˆåŒ…æ‹¬å­¦ä¹ æ–°æŠ€æœ¯ï¼‰       |       500        |       500        |
|              Design Spec              |              ç”Ÿæˆè®¾è®¡æ–‡æ¡£              |        60        |        60        |
|             Design Review             |     è®¾è®¡å¤å®¡ï¼ˆå’ŒåŒäº‹å®¡æ ¸è®¾è®¡æ–‡æ¡£ï¼‰     |        30        |        30        |
|            Coding Standard            | ä»£ç è§„èŒƒï¼ˆä¸ºç›®å‰çš„å¼€å‘åˆ¶å®šåˆé€‚çš„è§„èŒƒï¼‰ |        30        |        30        |
|                Design                 |                å…·ä½“è®¾è®¡                |       200        |       250        |
|                Coding                 |                å…·ä½“ç¼–ç                 |       400        |       450        |
|              Code Review              |                ä»£ç å¤å®¡                |        60        |        60        |
|                 Test                  |  æµ‹è¯•ï¼ˆè‡ªæˆ‘æµ‹è¯•ã€ä¿®æ”¹ä»£ç ã€æäº¤æµ‹è¯•ï¼‰  |       200        |       250        |
|               Reporting               |                  æŠ¥å‘Š                  |        20        |        60        |
|              Test Report              |                æµ‹è¯•æŠ¥å‘Š                |        20        |        20        |
|           Size Measurement            |               è®¡ç®—å·¥ä½œé‡               |        10        |        10        |
| Postmortem & Process Improvement Plan |      äº‹åæ€»ç»“ï¼Œå¹¶æå‡ºè¿‡ç¨‹æ”¹è¿›è®¡åˆ’      |        60        |        30        |
|                                       |                  åˆè®¡                  |       3090       |       3580       |


## III. è§£é¢˜æ€è·¯

æ•°ç‹¬æ˜¯ä¸€ç§æ•°å­¦é€»è¾‘æ¸¸æˆï¼Œæ¸¸æˆç”± 9 Ã— 9 ä¸ªæ ¼å­ç»„æˆï¼Œç©å®¶éœ€è¦æ ¹æ®æ ¼å­æä¾›çš„æ•°å­—æ¨ç†å‡ºå…¶ä»–æ ¼å­çš„æ•°å­—ã€‚æœ¬æ¬¡é¡¹ç›®è¦æ±‚ï¼š

-   ç”Ÿæˆä¸é‡å¤çš„æ•°ç‹¬ç»ˆå±€è‡³æ–‡ä»¶ï¼Œè¦æ±‚æ•°ç‹¬å·¦ä¸Šè§’æ•°å­—æ’ä¸ºï¼š`(3 + 0) % 9 + 1 = 4`
-   è¯»å–æ–‡ä»¶ä¸­çš„æ•°ç‹¬é—®é¢˜ï¼Œæ±‚è§£å¹¶å°†ç»“æœè¾“å‡ºè‡³æ–‡ä»¶

### 3.1 ç”Ÿæˆæ•°ç‹¬

ç»è¿‡æˆ‘åœ¨ç½‘ä¸Šçš„æŸ¥é˜…èµ„æ–™ï¼Œæˆ‘å‘ç°ç›®å‰ç”Ÿæˆæ•°ç‹¬çš„ç®—æ³•ä¸€å…±æœ‰è¿™æ ·çš„å‡ ç§ï¼š

1.  æš´åŠ›æœç´¢ ï¼‹ å›æº¯æ³•
2.  çŸ©é˜µå˜æ¢æ³•
3.  å…¨æ’åˆ—å¹³ç§»æ³•

é¦–å…ˆæˆ‘æ’é™¤äº†ã€Œæš´åŠ›æœç´¢ + å›æº¯ã€çš„ç”Ÿæˆæ•°ç‹¬ç»ˆå±€çš„æ–¹æ³•ï¼Œå› ä¸ºç»è¿‡èµ„æ–™çš„å¯¹æ¯”ï¼Œç›¸æ¯”äºå¦å¤–çš„ä¸¤ç§æ–¹æ³•ï¼Œæš´åŠ›æœç´¢æ•ˆç‡ä½ä¸‹ï¼Œå¯¹äº 1,000,000 ä¸ªè¦æ±‚çš„æ•°ç‹¬ç”Ÿæˆæ•°æ®é‡æ¥è¯´æ˜¾å¾—å°¤ä¸ºä¸åˆé€‚ã€‚

å¦å¤–çš„ä¸€ç§çŸ©é˜µå˜æ¢æ–¹æ³•ï¼Œæˆ‘å‚è€ƒäº†è¿™ç¯‡æ–‡ç«  - [æ•°ç‹¬ç»ˆç›˜ç”Ÿæˆçš„å‡ ç§æ–¹æ³•](https://my.oschina.net/wangmengjun/blog/781984)ã€‚**å…¶ä¸»è¦æ€è·¯åœ¨äºé€‰æ‹©ä¸€ä¸ªåˆå§‹ç§å­æ•°ç‹¬ï¼Œé€šè¿‡åœ¨åˆé€‚èŒƒå›´å†…è¿›è¡Œè¡Œã€åˆ—ä¸æ•°å­—çš„éšæœºæ¬¡æ•°çš„éšæœºäº¤æ¢æ¥ç”Ÿæˆæˆ‘ä»¬æ‰€è¦çš„æ•°ç‹¬ç»ˆå±€**ã€‚è¿™ç§æ–¹æ³•ä¸ä»…æ•ˆç‡è¾ƒé«˜ï¼Œå®ç°æ¯”è¾ƒæ–¹ä¾¿ï¼Œæœ€ç»ˆç”Ÿæˆçš„ç»ˆå±€ä¸¤ä¸¤åŒ¹é…åº¦ä¹Ÿå¾ˆä½ï¼Œ**äºæ˜¯æˆ‘é¦–å…ˆé€‰æ‹©äº†åˆ©ç”¨çŸ©é˜µå˜æ¢çš„æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å®ç°ã€‚**

### 3.2 æ±‚è§£æ•°ç‹¬

å‰æœŸçš„åˆæ­¥æœç´¢ä¸­ï¼Œæˆ‘å‘ç°å¤§å¤šæ•°ä¸­æ–‡èµ„æ–™ä¸‹æ±‚è§£æ•°ç‹¬çš„æ–¹æ³•å‡ ä¹éƒ½æ˜¯ã€Œå›æº¯æ³•ã€å’Œã€Œèˆè¹ˆé“¾ - ç²¾ç¡®è¦†ç›–é—®é¢˜ã€è¿™ä¸¤ç§ç®—æ³•ã€‚

å…¶ä¸­ï¼Œè§£é¢˜è¿‡ç¨‹æˆ‘å‚è€ƒäº†ï¼š

-   [æš´åŠ›ç®—æ³•ä¹‹ç¾ï¼šå¦‚ä½•åœ¨ 1 æ¯«ç§’å†…è§£å†³æ•°ç‹¬é—®é¢˜ï¼Ÿ| æš´åŠ›æšä¸¾æ³•+æ·±åº¦ä¼˜å…ˆæœç´¢ POJ 2982](https://zhuanlan.zhihu.com/p/31865810?utm_source=qq&utm_medium=social)
-   [Sudoku solving algorithms - Wikipedia](https://en.wikipedia.org/wiki/Sudoku_solving_algorithms)
-   [èˆè¹ˆé“¾ - ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E8%88%9E%E8%B9%88%E9%93%BE)
-   [ä½¿ç”¨ Dancing Links ç®—æ³•æ±‚è§£æ•°ç‹¬](https://www.jianshu.com/p/93b52c37cc65)

ç­‰ç­‰èµ„æ–™ã€‚ç»è¿‡åˆ†æï¼Œæˆ‘è§‰å¾—å¯¹äºæ±‚è§£æ•°ç‹¬æ¥è®²ï¼Œæœ€æš´åŠ›çš„ **æ·±åº¦ä¼˜å…ˆæœç´¢ä¸å›æº¯çš„ç»“åˆ** è¿™ç§æ–¹æ³•æ¯”è¾ƒåˆé€‚ï¼Œåœ¨ä¹‹åçš„å®ç°è¿‡ç¨‹æˆ‘ä¹Ÿå…ˆé‡‡ç”¨äº†è¿™æ ·çš„åŠæ³•ã€‚

## IV. è®¾è®¡å®ç°

æœ¬æ¬¡é¡¹ç›®ï¼š

-   æˆ‘é€‰æ‹©ä½¿ç”¨ Python è¿›è¡Œå®ç°ï¼Œåœ¨ Windows å¹³å°è¿›è¡Œä»£ç ç¼–å†™ï¼Œåœ¨ Windows å’Œ Linux å¹³å°è¿›è¡Œæµ‹è¯•
-   æˆ‘åˆ©ç”¨ `git` è¿›è¡Œä»£ç çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œä»£ç æ‰˜ç®¡åœ¨ GitHub
-   æˆ‘åˆ©ç”¨ `pylint` å¯¹ä»£ç è¿›è¡Œè´¨é‡åˆ†ææ£€æŸ¥ï¼Œåˆ©ç”¨ [Codacy](https://www.codacy.com/app/spencerwooo/Sudoku?utm_source=github.com&utm_medium=referral&utm_content=spencerwooo/Sudoku&utm_campaign=Badge_Grade) å¹³å°å¯¹ä»£ç è´¨é‡è¿›è¡ŒæŒç»­åˆ†æç›‘æµ‹ï¼š[![Codacy Badge](https://api.codacy.com/project/badge/Grade/af90b6b7da74437ca6b1b1b0eb0443cd)](https://www.codacy.com/app/spencerwooo/Sudoku?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=spencerwooo/Sudoku&amp;utm_campaign=Badge_Grade)
-   æˆ‘åˆ©ç”¨ `cProfile` å¯¹ä»£ç è¿›è¡Œæ€§èƒ½åˆ†æï¼Œåˆ©ç”¨ `gprof2dot` ç”Ÿæˆæ€§èƒ½åˆ†ææŠ¥å‘Š
-   æˆ‘è®¾è®¡äº† [åç»„æµ‹è¯•ç”¨ä¾‹](https://github.com/spencerwooo/Sudoku/tree/master/tests) è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå¹¶åˆ©ç”¨ `Coverage.py` æµ‹è¯•åˆ†æ”¯è¦†ç›–ç‡ç­‰æŒ‡æ ‡ï¼Œå¹¶é€šè¿‡ Codacy API å°†ç»“æœåŒæ­¥è‡³ [Codacy å¹³å°](https://app.codacy.com/project/spencerwooo/Sudoku/dashboard) æŒç»­é›†æˆï¼š[![Codacy Badge](https://api.codacy.com/project/badge/Coverage/af90b6b7da74437ca6b1b1b0eb0443cd)](https://www.codacy.com/app/spencerwooo/Sudoku?utm_source=github.com&utm_medium=referral&utm_content=spencerwooo/Sudoku&utm_campaign=Badge_Coverage)

æœ¬æ¬¡é¡¹ç›®çš„åšå®¢ï¼š

-   æˆ‘é€‰æ‹©åˆ©ç”¨ [VuePress](https://vuepress.vuejs.org/) ç”Ÿæˆé¡¹ç›®åšå®¢ï¼Œæ¥è®°å½•æˆ‘çš„å¼€å‘å†ç¨‹
-   ä¸ºäº†éƒ¨ç½²æ–¹ä¾¿ï¼Œæˆ‘åˆ©ç”¨ [Travis CI](https://travis-ci.org/) æŒç»­é›†æˆæˆ‘çš„åšå®¢å†…å®¹ï¼Œå¹¶åˆ©ç”¨ [GitHub Pages](https://pages.github.com/) æ‰˜ç®¡æˆ‘åšå®¢çš„é™æ€æ–‡ä»¶

### 4.1 é¡¹ç›®ç»“æ„

æœ¬æ¬¡é¡¹ç›®æˆ‘æ‰˜ç®¡åœ¨ GitHubï¼Œåˆ©ç”¨ `git` è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚é¡¹ç›®ä¸‰ä¸ªåˆ†æ”¯ï¼š

![](https://i.loli.net/2018/12/06/5c09197e3b1ff.png)

-   `master` åˆ†æ”¯æ‰˜ç®¡æ•°ç‹¬ä¸»ç¨‹åºçš„æºä»£ç ã€å•å…ƒæµ‹è¯•ä¸æ€§èƒ½æµ‹è¯•ç›¸å…³æ–‡ä»¶ç­‰
-   `docs` åˆ†æ”¯æ‰˜ç®¡åšå®¢çš„æºä»£ç ä¸æŒç»­é›†æˆ CI é…ç½®æ–‡ä»¶
-   `gh-pages` åˆ†æ”¯æ‰˜ç®¡åšå®¢çš„é™æ€æ–‡ä»¶ï¼ŒGitHub Pages åœ¨æ­¤åˆ†æ”¯è¿›è¡Œæ„å»º

å…¶ä¸­çš„ä¸»ç¨‹åº `master` åˆ†æ”¯ç»“æ„ä¸åŠŸèƒ½ï¼š

```bash
.
â”œâ”€â”€ LICENSE
â”œâ”€â”€ README.md
â”œâ”€â”€ docs
â”œâ”€â”€ performance
â”‚   â”œâ”€â”€ performance_update.png
â”‚   â”œâ”€â”€ performance_update.pstats
â”‚   â”œâ”€â”€ result.png
â”‚   â””â”€â”€ result.pstats
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ sudoku
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ create_sudoku.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ solve-me.txt
â”‚   â”œâ”€â”€ solve_sudoku.py
â”‚   â””â”€â”€ sudoku.txt
â””â”€â”€ tests
    â”œâ”€â”€ README.md
    â””â”€â”€ coverage.xml
```

-   ğŸ `sudoku/`ï¼šPython ä¸»ç¨‹åºæºç æ–‡ä»¶å¤¹ï¼Œç¨‹åºå…¥å£ä¸º `main.py`
-   ğŸ” `tests/`ï¼šå•å…ƒæµ‹è¯•ç”¨ä¾‹
-   ğŸš€ `performance/`ï¼šæ€§èƒ½æµ‹è¯•ç»“æœï¼ˆåŒ…æ‹¬åŸäºŒè¿›åˆ¶æ–‡ä»¶ä¸ç”Ÿæˆçš„æ€§èƒ½æµ‹è¯•å›¾é‰´ï¼‰

### 4.2 ä»£ç è®¾è®¡

:::warning æ³¨æ„
æ­¤å¤„ä»£ç è®¾è®¡ä¸ºæœ€åˆæœªä¼˜åŒ–æ€§èƒ½çš„ç‰ˆæœ¬ï¼Œå…¶ä¸­ï¼š

-   ç”Ÿæˆæ•°ç‹¬ç»ˆå±€ï¼šé‡‡ç”¨äº† **çŸ©é˜µå˜æ¢ç®—æ³•**
-   è§£å†³æ•°ç‹¬ï¼šé‡‡ç”¨äº† **æœªå‰ªæçš„æ·±åº¦ä¼˜å…ˆæœç´¢ä¸å›æº¯** çš„ç®—æ³•

æœ‰å¾ˆå¤§çš„æ”¹è¿›ç©ºé—´ï¼Œè¯¦è§ã€Œæ€§èƒ½æ”¹è¿›ã€ã€‚
:::

é¡¹ç›®å»ºç«‹äº†å…±ä¸‰ä¸ªæ–‡ä»¶ï¼š

-   `main.py`ï¼šç¨‹åºå…¥å£ï¼Œå¤„ç†è¾“å…¥å‚æ•°ã€æ–‡ä»¶è¾“å‡ºä¸å¼‚å¸¸æƒ…å†µ
-   `create_sudoku.py`ï¼šå†…å«ç±» `GenerateSudoku`
-   `solve_sudoku.py`ï¼šå†…å«ç±» `SolveSudoku`

å…±ä¸¤ä¸ªç±»ï¼š

-   `GenerateSudoku`:
    -   `__init__()`ï¼šåˆå§‹åŒ–å‡½æ•°
    -   `swap_row(row1, row2)`ï¼šäº¤æ¢åˆé€‚çš„ä¸¤è¡Œ
    -   `swap_col(col1, col2)`ï¼šäº¤æ¢åˆé€‚çš„ä¸¤åˆ—
    -   `swap_num(num1, num2)`ï¼šäº¤æ¢éšæœºçš„ä¸¤ä¸ªæ•°å­—
    -   `generate_candidate()`ï¼šç”Ÿæˆæœ€ç»ˆçš„æ•°ç‹¬ç»ˆå±€
-   `SolveSudoku`:
    -   `__init__(sudoku_path)`ï¼šåˆå§‹åŒ–å‡½æ•°ï¼Œä¼ å…¥å¾…è§£å†³æ•°ç‹¬æ–‡ä»¶è·¯å¾„
    -   `solving_sudoku(sudoku)`ï¼šæ·±åº¦ä¼˜å…ˆæœç´¢è§£å†³æ•°ç‹¬é—®é¢˜ä¸»å‡½æ•°
    -   `num_is_candidate(sudoku, num, row, col)`ï¼šåˆ¤æ–­ä¼ å…¥æ•°å­—èƒ½å¦å¡«å…¥ç›¸åº”çš„ä½ç½®
    -   `find_that_blank(sudoku, current)`ï¼šå¯»æ‰¾å‰©ä½™æ•°ç‹¬å†…æ˜¯å¦è¿˜æœ‰æœªå¡«å…¥çš„ç©ºä½

ç›¸å…³çš„åŒ…ã€UML ç±»å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://i.loli.net/2018/12/07/5c0a6bc5882bc.png)

æ•°ç‹¬æ¨¡å—çš„å…¥å£æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://i.loli.net/2018/12/07/5c0a75f8a00d9.png)

ç”Ÿæˆæ•°ç‹¬ `GenerateSudoku` å’Œæ±‚è§£æ•°ç‹¬ `SolveSudoku` ä¸¤ä¸ªæ¨¡å—çš„æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://i.loli.net/2018/12/08/5c0b61d0cca47.png)

## V. æ€§èƒ½æ”¹è¿›

æˆ‘é€šè¿‡ Python æ€§èƒ½åˆ†ææ¨¡å— `cProfile` ç”Ÿæˆäº†ç¨‹åºçš„æ€§èƒ½æ€»è§ˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåˆ©ç”¨ `gprof2dot` å°†æ€§èƒ½åˆ†ææŠ¥å‘Šç”Ÿæˆå›¾ç‰‡å¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://i.loli.net/2018/12/07/5c09fa4e3ebc4.png)

å¯ä»¥çœ‹åˆ°ï¼Œé’ˆå¯¹ã€Œæ±‚è§£æ•°ç‹¬ã€è¿™ä¸ªé—®é¢˜ï¼Œæœ€è€—æ—¶é—´çš„æ¨¡å—ä¾æ—§æ˜¯ä¸»è¿è¡Œæ¨¡å— `solving_sudoku()` è¿™ä¸ªæ–¹æ³•ã€‚å½“ç„¶æ˜¯ç”±äºç®—æ³•ã€Œæœªå‰ªæçš„æ·±åº¦ä¼˜å…ˆæœç´¢ä¸å›æº¯ã€é™åˆ¶ï¼Œè¿™é‡Œæ€§èƒ½ç“¶é¢ˆä¹Ÿå°±æ˜¾ç°å‡ºæ¥äº†ã€‚

ä¸€æ¬¡å¶ç„¶çš„æœºä¼šï¼Œæˆ‘åœ¨ LeetCode å¹³å°çœ‹åˆ°äº†ä¸€ä¸ªç®—æ³•é—®é¢˜ï¼šã€ŒSudoku Solverã€ï¼Œè¿™é“é¢˜ç›®çš„éœ€æ±‚å’Œæˆ‘ä»¬æœ¬æ¬¡é¡¹ç›®ç±»ä¼¼ï¼Œä¹Ÿæ˜¯è¾“å…¥æ•°ç‹¬æ±‚è§£é¢˜ç›®ã€‚åœ¨è¿™é“é¢˜ç›®çš„è¯„è®ºåŒºæˆ‘çœ‹åˆ°äº†è¿™æ ·çš„ä¸€åªæäº¤ï¼š[28ms python solution beats 100.0%](https://leetcode.com/problems/sudoku-solver/discuss/199974/28ms-python-solution-beats-100.0?tdsourcetag=s_pctim_aiomsg)ï¼Œç»è¿‡ä»”ç»†çš„è§‚å¯Ÿåˆ†æï¼Œæˆ‘å‘ç°è¿™åªæäº¤çš„ç®—æ³•è®¾è®¡ååˆ†å·§å¦™ï¼Œå‰ªæååˆ†åˆ°ä½ï¼Œç”±äºç¯‡å¹…ï¼Œæˆ‘åœ¨[ã€Œä»£ç ç»†èŠ‚ - æ±‚è§£æ•°ç‹¬çš„ç®—æ³•ã€](/Progress/#_6-2-æ±‚è§£æ•°ç‹¬)é‡Œé¢å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œè¯¦ç»†å‰–æã€‚

æ€»ä¹‹ï¼Œæˆ‘æŒ‰ç…§è¿™åªæäº¤çš„ç®—æ³•è®¾è®¡ä»å¤´æ”¥å†™äº†æˆ‘çš„ SolveSudoku æ¨¡å—ï¼Œè¿›è¡Œäº†å½»åº•çš„è¿ç®—ä¼˜åŒ–ï¼Œå¹¶ç”Ÿæˆäº†ç›¸åº”çš„æ€§èƒ½åˆ†ææŠ¥å‘Šå¦‚ä¸‹å›¾ï¼š

![](https://i.loli.net/2018/12/09/5c0cc941a6cb4.png)

å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶ `solving_sudoku()` ä¾æ—§æ˜¯ç®—æ³•è€—æ—¶æœ€é•¿çš„æ¨¡å—ï¼Œä½†æ˜¯ç›¸æ¯”ä¸Šä¸€æ¬¡ä¿®æ”¹ï¼Œè¿™ä¸ªæ¨¡å—è¿è¡Œæ•ˆç‡æœ‰äº†æ˜¾è‘—çš„æå‡ã€‚ç›´è§‚çš„æ¯”è¾ƒèµ·æ¥ï¼Œæˆ‘åœ¨ [é¡¹ç›® README è¿™é‡Œ](/#æ€§èƒ½æµ‹è¯•æ•°ç‹¬ç”¨ä¾‹) é™„ä¸Šäº†ä¸¤ä¸ªæ€§èƒ½æµ‹è¯•ç”¨ä¾‹ï¼ˆä¸‹ä¸¤å›¾å€’æ•°ç¬¬äºŒä¸‰è¡Œï¼‰ï¼šç¬¬ä¸€ä¸ªç›¸å¯¹ç®€å•ï¼Œç”¨æˆ‘æœ€åˆçš„æ–¹æ³•è¿›è¡Œæµ‹è¯•éœ€è¦ 5s å·¦å³è·‘å‡ºç»“æœï¼›ç¬¬äºŒä¸ªåˆ™æ¯”è¾ƒéš¾ï¼Œç”¨æˆ‘æœ€åˆçš„ç®—æ³•éœ€è¦è·‘è¿‘ 150sï¼š

![](https://i.loli.net/2018/12/09/5c0cc9e3b1836.png)

ç»è¿‡è¿™æ¬¡ä¼˜åŒ–çš„ç»“æœï¼š

![](https://i.loli.net/2018/12/09/5c0cc9ef2550d.png)

å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡ä¼˜åŒ–ï¼Œå°±ç®—æ˜¯æœ€éš¾çš„æ•°ç‹¬æˆ‘ä»¬ä¹Ÿèƒ½åœ¨ä¸€ç§’å†…è§£å‡ºç­”æ¡ˆã€‚ç®—æ³•ä¸ºç‹ï¼ğŸ’ª

## VI. ä»£ç ç»†èŠ‚

### 6.1 ç”Ÿæˆæ•°ç‹¬

> ç®—æ³• â€”â€” çŸ©é˜µå˜æ¢æ³•

çŸ©é˜µå˜æ¢çš„æ–¹æ³•ç”Ÿæˆæ•°ç‹¬ç›¸å¯¹æ–¹ä¾¿ï¼Œå…¶æ ¸å¿ƒåœ¨äºéšæœºçš„äº¤æ¢ç›¸åº”çš„ä¸¤è¡Œã€ä¸¤åˆ—å’Œä¸¤ä¸ªæ•°å­—ã€‚æˆ‘é¦–å…ˆå°è£…äº†è¡Œã€åˆ—ã€æ•°å­—äº¤æ¢çš„ä¸‰ä¸ªæ–¹æ³•ï¼š

```python
# äº¤æ¢ä¸¤è¡Œ
def swap_row(self, row1, row2):
  self.sudoku[[row1, row2]] = self.sudoku[[row2, row1]]

#äº¤æ¢ä¸¤åˆ—
def swap_col(self, col1, col2):
  self.sudoku[:, [col1, col2]] = self.sudoku[:, [col2, col1]]

# äº¤æ¢ä¸¤ä¸ªæ•°å­—
def swap_num(self, num1, num2):
  for i in range(9):
    for j in range(9):
      if self.sudoku[i][j] == num1:
        self.sudoku[i][j] = num2
      elif self.sudoku[i][j] == num2:
        self.sudoku[i][j] = num1
```

ä¹‹åï¼Œæˆ‘éšæœºé€‰å–åˆé€‚çš„ä¸¤è¡Œã€ä¸¤åˆ—å’Œä¸¤ä¸ªæ•°å­—è¿›è¡Œäº¤æ¢ï¼Œç”Ÿæˆæœ€ç»ˆçš„æ•°ç‹¬ï¼š

```python
def generate_candidate(self):
  # æ ¹æ®è¦æ±‚ï¼š(3+0)/9+1=4, å·¦ä¸Šè§’æ•°å­—æ’ä¸º 4
  num_seed = [1, 2, 3, 5, 6, 7, 8, 9]
  # æ ¹æ®è¦æ±‚ï¼šå…¶ä»–è¡Œã€åˆ—ä¸èƒ½ä¸ç¬¬ä¸€è¡Œã€ç¬¬ä¸€åˆ—è¿›è¡Œäº¤æ¢
  row_and_col_seed = [[1, 2], [3, 4, 5], [6, 7, 8]]
  for _ in range(10):
    random.shuffle(num_seed)
    random.shuffle(row_and_col_seed)
    random.shuffle([random.shuffle(seed) for seed in row_and_col_seed])
    self.swap_row(row_and_col_seed[0][0], row_and_col_seed[0][1])
    self.swap_col(row_and_col_seed[0][0], row_and_col_seed[0][1])
    self.swap_num(num_seed[0], num_seed[1])
```

### 6.2 æ±‚è§£æ•°ç‹¬

> ç®—æ³• â€”â€” ç²¾ç¡®å‰ªæã€è¡Œåˆ—å—çº¦æŸä¸‹çš„æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•

è¿™é‡Œæ±‚è§£æ•°ç‹¬çš„ç®—æ³•ç²¾é«“åœ¨äºï¼š**åœ¨è¡Œã€åˆ—ä¸ 3x3 å­å—çš„çº¦æŸä¸‹ï¼Œç¡®å®šå½“å‰å—æ‰€èƒ½å¡«å…¥çš„å€™é€‰æ•°å­—é›†åˆã€‚**

```python
def dfs(self, blank_in_sudoku, col_num, row_num, sqr_num, sudoku):
  # åˆ¤æ–­å½“å‰æ•°ç‹¬æ˜¯å¦è¿˜æœ‰æœªå¡«å…¥çš„ç©ºæ ¼
  if not blank_in_sudoku:
    return True

  max_possible_len = 9

  for (m, n) in blank_in_sudoku:
    candidate_num = row_num[m] & col_num[n] & sqr_num[m//3][n//3]
    if len(candidate_num) <= max_possible_len:
      max_possible_len = len(candidate_num)
      i, j = m, n

  if max_possible_len == 0:
    return False

  # ç»è¿‡è¡Œã€åˆ—ã€3x3 å—çº¦æŸï¼Œç¡®å®šå€™é€‰æ•°å­—
  blank_in_sudoku.remove((i, j))
  candidate_num = row_num[i] & col_num[j] & sqr_num[i//3][j//3]

  for num in candidate_num:
    #å¡«å…¥æ•°å­—ï¼Œåˆ¤æ–­èƒ½å¦è¿›è¡Œä¸‹ä¸€æ­¥çš„å¡«å†™
    row_num[i].remove(num)
    col_num[j].remove(num)
    sqr_num[i//3][j//3].remove(num)
    sudoku[i][j] = num
    if self.dfs(blank_in_sudoku, col_num, row_num, sqr_num, sudoku):
      return True

    # å¦‚æœä¸èƒ½ï¼Œå›é€€ï¼Œå°†å½“å‰æ ¼å­èµ‹ 0
    sudoku[i][j] = 0
    row_num[i].add(num)
    col_num[j].add(num)
    sqr_num[i//3][j//3].add(num)

  blank_in_sudoku.add((i, j))
  return False
```

ç”±äºç»è¿‡ **è¡Œã€åˆ—å’Œå­å—çš„çº¦æŸ**ï¼Œå½“å‰å—æ‰€èƒ½å¡«å…¥çš„å€™é€‰æ•°å­—å˜å¾—æå°‘ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹æ³•è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢çš„ç®—æ³•å°±èƒ½æå¤§æå‡è¿ç®—æ•ˆç‡ã€‚

## VII. é¡¹ç›®æ€»ç»“

é€šè¿‡è¿™ä¸ªä¸€ä¸ªæœˆæ¥çš„å¼€å‘ç»å†ï¼š

**é’ˆå¯¹ç®—æ³•å®ç°æ–¹é¢ï¼š**

æˆ‘æ›´åŠ ç†Ÿæ‚‰äº†å›æº¯ã€å‰ªæå’Œæ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•çš„ç²¾å¦™ä¹‹å¤„ï¼Œèƒ½å¤Ÿæ›´åŠ ç†Ÿç»ƒçš„å¯¹æ•°ç‹¬ç›¸å…³çš„ç®—æ³•è¿›è¡Œæ±‚è§£å’Œç¼–å†™ã€‚åŒæ—¶ï¼Œç”±äºæˆ‘ä½¿ç”¨ Python è¿›è¡Œå®ç°ï¼Œæˆ‘ä¹Ÿæ›´åŠ æ·±åˆ»çš„ä½“ä¼šåˆ° Python è¿™é—¨è¯­è¨€çš„ç¥å¥‡ã€å¼ºå¤§ï¼Œç®€ç®€å•å•çš„è¯­æ³•å°±èƒ½å®ç°å¼ºæœ‰åŠ›çš„åŠŸèƒ½ã€‚åœ¨æœ¬æ¬¡å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³è¿›è¡Œç¼–ç ï¼Œè¿™ä¹Ÿè®©æˆ‘æ›´åŠ æ·±å…¥ç†è§£äº†é¢å‘å¯¹è±¡çš„å†…æ¶µæ‰€åœ¨ã€‚

**é’ˆå¯¹è½¯ä»¶å¼€å‘æ–¹é¢ï¼š**

ä»éœ€æ±‚åˆ†æã€è§£å†³é—®é¢˜ã€å®é™…å¼€å‘ã€æ€§èƒ½æµ‹è¯•ã€å•å…ƒæµ‹è¯•ç­‰ç­‰è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ›´åŠ ç†Ÿæ‚‰äº†ä¸€æ¬¾è½¯ä»¶çš„çœŸå®å¼€å‘è¿‡ç¨‹æ˜¯æ€æ ·çš„ã€‚è¿™æ¬¡çš„é¡¹ç›®ä¸ä»…è®©æˆ‘å¯¹è½¯ä»¶å¼€å‘æœ‰äº†æ›´æ·±åˆ»çš„äº†è§£ã€æ€è€ƒï¼Œè¿˜è®©æˆ‘å¯¹ä¸€æ¬¾è½¯ä»¶ä»ã€Œèƒ½å®ç°åŠŸèƒ½ã€å°±è¡Œï¼Œåˆ°è¦ã€Œæ³¨é‡æ€§èƒ½ã€ã€è¦ã€Œè¿›è¡Œæµ‹è¯•ã€ç­‰ç­‰ç¯èŠ‚æ›´åŠ é‡è§†ã€‚è¿™æ˜¯è½¯ä»¶å·¥ç¨‹å¼€å‘çš„ç²¾é«“æ‰€åœ¨ã€‚

æœ¬æ¬¡é¡¹ç›®é™¤äº†è®©æˆ‘ç†Ÿæ‚‰ç¼–ç¨‹è¯­è¨€ã€ç®—æ³•å®ç°å’Œå¼€å‘å·¥å…·ä»¥å¤–ï¼Œæ›´é‡è¦çš„æ˜¯è®©æˆ‘ç†è§£ä¸€æ¬¾è½¯ä»¶ä»æ— åˆ°æœ‰çš„çœŸæ­£è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Œè¦ç»å†æ€æ ·çš„æµ‹è¯•ã€æ€æ ·çš„å®¡æ ¸ç­‰ç­‰ï¼Œè¿™æ˜¯è¿™æ¬¡é¡¹ç›®å¸¦ç»™æˆ‘æœ€ç²¾è‡´çš„ä½“éªŒã€‚
